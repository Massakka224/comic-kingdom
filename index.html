<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comic Kingdom â€“ Version 11.1</title>

<style>
body { font-family: Arial; background:#f2f2f2; padding:80px 10px 10px; }
h1,h2 { text-align:center; }
button { width:100%; padding:12px; margin:5px 0; font-size:16px; }
.box { background:#fff; padding:10px; border-radius:8px; margin:10px 0; }
.section { display:none; }
.section.active { display:block; }
.item { border:1px solid #ccc; padding:8px; margin:5px 0; cursor:pointer; }
nav { position:fixed; top:0; left:0; right:0; background:#fff; z-index:10; }
</style>
</head>

<body>

<h1>Comic Kingdom</h1>

<nav>
<button onclick="show('status')">Status</button>
<button onclick="show('stadt')">Stadt</button>
<button onclick="show('inventar')">Inventar</button>
<button onclick="show('ausruestung')">AusrÃ¼stung</button>
<button onclick="deleteCharacter()">Charakter lÃ¶schen</button>
</nav>

<!-- STATUS -->
<div id="status" class="section active">
<div class="box" id="statusBox"></div>
</div>

<!-- STADT -->
<div id="stadt" class="section">
<h2>Stadt</h2>
<div class="box">
<button onclick="taverne()">ğŸº Taverne</button>
<button onclick="schmied()">âš’ï¸ Schmied</button>
<button onclick="magieladen()">ğŸ”® Magieladen</button>
<button onclick="arena()">ğŸŸï¸ Arena</button>
<button onclick="dungeon()">ğŸ•³ï¸ Dungeon</button>
<button onclick="stall()">ğŸ Stall</button>
<button onclick="gilde()">ğŸ° Gilde</button>
<p id="cityLog"></p>
</div>
</div>

<!-- INVENTAR -->
<div id="inventar" class="section">
<h2>Inventar</h2>
<div class="box" id="inventoryList"></div>
</div>

<!-- AUSRÃœSTUNG -->
<div id="ausruestung" class="section">
<h2>AusrÃ¼stung</h2>
<div class="box" id="equipmentSlots"></div>
</div>

<script>
let game = JSON.parse(localStorage.getItem("ckSave")) || {
  level:1, gold:50, klasse:"Krieger",
  stats:{staerke:10, geschick:5, intelligenz:2, leben:100},
  inventory:[],
  equipment:{weapon:null},
  mount:false
};

const rarityLevels = {
  gewÃ¶hnlich:1, ungewÃ¶hnlich:20, selten:30,
  episch:100, legendÃ¤r:150, mystisch:500, himmlisch:700
};

function save(){ localStorage.setItem("ckSave", JSON.stringify(game)); }
function show(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function updateUI(){
  document.getElementById("statusBox").innerHTML=
  `Level: ${game.level}<br>Gold: ${game.gold}<br>Klasse: ${game.klasse}<br>
   StÃ¤rke: ${game.stats.staerke}<br>Leben: ${game.stats.leben}<br>
   Mount: ${game.mount?"Ja":"Nein"}`;
  updateInventory(); updateEquip();
}
function log(t){ document.getElementById("cityLog").innerText=t; }

/* ===== GEBÃ„UDE ===== */

function taverne(){
  game.level++; game.gold+=20;
  dropItem();
  log("Quest erledigt! +1 Level +20 Gold");
  save(); updateUI();
}

function schmied(){
  if(game.inventory.length===0){ log("Kein Item zum Verbessern"); return; }
  game.inventory[0].bonus++;
  log("Item verbessert!");
  save(); updateInventory();
}

function magieladen(){
  if(game.gold<10){ log("Zu wenig Gold"); return; }
  game.gold-=10;
  game.stats.leben+=5;
  log("Trank gekauft (+5 Leben)");
  save(); updateUI();
}

function arena(){
  let win=Math.random()>0.4;
  if(win){ game.gold+=30; log("Arena gewonnen!"); }
  else{ log("Arena verloren."); }
  save(); updateUI();
}

function dungeon(){
  dropItem(true);
  log("Dungeon geschafft! Seltenere Beute!");
  save(); updateUI();
}

function stall(){
  if(game.mount){ log("Du hast bereits ein Mount"); return; }
  if(game.gold<100){ log("100 Gold benÃ¶tigt"); return; }
  game.gold-=100; game.mount=true; game.stats.geschick+=5;
  log("Mount gekauft! +5 Geschick");
  save(); updateUI();
}

function gilde(){
  if(game.gold<10){ log("Kein Gold"); return; }
  game.gold-=10;
  log("10 Gold an Gilde gespendet");
  save(); updateUI();
}

/* ===== ITEMS ===== */

function dropItem(better=false){
  let allowed = Object.keys(rarityLevels)
    .filter(r=>game.level>=rarityLevels[r]);
  let rarity = allowed[Math.floor(Math.random()*allowed.length)];
  let item={
    name:"Waffe des "+rarity,
    rarity, bonus:better?5:2
  };
  game.inventory.push(item);
}

function updateInventory(){
  let d=document.getElementById("inventoryList"); d.innerHTML="";
  if(game.inventory.length===0){ d.innerText="Keine Items"; return; }
  game.inventory.forEach((it,i)=>{
    let e=document.createElement("div");
    e.className="item";
    e.innerText=it.name+" +"+it.bonus;
    e.onclick=()=>{ game.equipment.weapon=it; save(); updateEquip(); };
    d.appendChild(e);
  });
}

function updateEquip(){
  document.getElementById("equipmentSlots").innerHTML=
  "Waffe: "+(game.equipment.weapon?game.equipment.weapon.name:"leer");
}

function deleteCharacter(){
  if(confirm("Alles lÃ¶schen?")){
    localStorage.removeItem("ckSave");
    location.reload();
  }
}

updateUI();
</script>
</body>
</html>
