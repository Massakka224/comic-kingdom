<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comic Kingdom â€“ Version 10</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  padding: 80px 10px 10px;
}
h1, h2 { text-align: center; }
button {
  width: 100%;
  padding: 12px;
  margin: 5px 0;
  font-size: 16px;
}
.box {
  background: #fff;
  padding: 10px;
  margin: 10px 0;
  border-radius: 8px;
}
.section { display: none; }
.section.active { display: block; }
.item {
  border: 1px solid #ccc;
  padding: 8px;
  margin: 5px 0;
  cursor: pointer;
}
.item:hover { background: #eee; }
nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  background: #fff;
  padding: 5px;
  z-index: 10;
}
</style>
</head>

<body>

<h1>Comic Kingdom</h1>

<nav>
<button onclick="show('status')">Status</button>
<button onclick="show('stadt')">Stadt</button>
<button onclick="show('quests')">Quests</button>
<button onclick="show('dungeon')">Dungeon</button>
<button onclick="show('inventar')">Inventar</button>
<button onclick="show('ausruestung')">AusrÃ¼stung</button>
<button onclick="deleteCharacter()">Charakter lÃ¶schen</button>
</nav>

<!-- KLASSE -->
<div id="classSelect" class="section active">
<h2>Klasse wÃ¤hlen</h2>
<div class="box">
<button onclick="createCharacter('Krieger')">ğŸ›¡ï¸ Krieger</button>
<button onclick="createCharacter('JÃ¤ger')">ğŸ¹ JÃ¤ger</button>
<button onclick="createCharacter('Magier')">ğŸ”® Magier</button>
<button onclick="createCharacter('Assassine')">ğŸ—¡ï¸ Assassine</button>
<button onclick="createCharacter('Nekromant')">ğŸ’€ Nekromant</button>
</div>
</div>

<!-- STATUS -->
<div id="status" class="section">
<h2>Status</h2>
<div class="box" id="statusBox"></div>
</div>

<!-- STADT -->
<div id="stadt" class="section">
<h2>Stadt</h2>
<div class="box">
<button onclick="info('Taverne')">ğŸº Taverne</button>
<button onclick="info('Schmied')">âš’ï¸ Schmied</button>
<button onclick="info('Magieladen')">ğŸ”® Magieladen</button>
<button onclick="info('Arena')">ğŸŸï¸ Arena</button>
<button onclick="info('Dungeon')">ğŸ•³ï¸ Dungeon</button>
<button onclick="info('Stall')">ğŸ Stall</button>
<button onclick="info('Gilde')">ğŸ° Gilde</button>
<p id="cityInfo"></p>
</div>
</div>

<!-- QUESTS -->
<div id="quests" class="section">
<h2>Quests</h2>
<div class="box">
<button onclick="startQuest()">Quest starten</button>
<p id="questText">Keine aktive Quest</p>
</div>
</div>

<!-- DUNGEON -->
<div id="dungeon" class="section">
<h2>Dungeon</h2>
<div class="box">
<button onclick="runDungeon()">Dungeon betreten</button>
<p id="dungeonText"></p>
</div>
</div>

<!-- INVENTAR -->
<div id="inventar" class="section">
<h2>Inventar</h2>
<div class="box" id="inventoryList"></div>
</div>

<!-- AUSRÃœSTUNG -->
<div id="ausruestung" class="section">
<h2>AusrÃ¼stung</h2>
<div class="box" id="equipmentSlots"></div>
</div>

<!-- ITEM MODAL -->
<div id="modal" style="display:none">
<div class="box">
<div id="itemDetails"></div>
<button onclick="equipItem()">AusrÃ¼sten</button>
<button onclick="destroyItem()">ZerstÃ¶ren</button>
<button onclick="closeModal()">SchlieÃŸen</button>
</div>
</div>

<script>
let game = {
  level: 1,
  gold: 50,
  klasse: null,
  stats: {},
  inventory: [],
  equipment: {
    head:null, body:null, legs:null, weapon:null, ring:null, amulet:null
  }
};

const classStats = {
  Krieger: {staerke:10, geschick:5, intelligenz:2, leben:120},
  JÃ¤ger: {staerke:5, geschick:10, intelligenz:3, leben:90},
  Magier: {staerke:2, geschick:4, intelligenz:12, leben:70},
  Assassine:{staerke:4, geschick:12, intelligenz:3, leben:80},
  Nekromant:{staerke:2, geschick:3, intelligenz:13, leben:75}
};

const rarityLevels = {
  gewÃ¶hnlich:1,
  ungewÃ¶hnlich:20,
  selten:30,
  episch:100,
  legendÃ¤r:150,
  mystisch:500,
  himmlisch:700
};

let selectedItemIndex = null;

function saveGame() {
  localStorage.setItem("comicKingdomSave", JSON.stringify(game));
}

function loadGame() {
  const save = localStorage.getItem("comicKingdomSave");
  if (save) {
    game = JSON.parse(save);
    document.getElementById("classSelect").style.display="none";
    show('status');
    updateUI();
  }
}

function createCharacter(cls) {
  game.klasse = cls;
  game.stats = classStats[cls];
  saveGame();
  document.getElementById("classSelect").style.display="none";
  show('status');
  updateUI();
}

function deleteCharacter() {
  if(confirm("Charakter wirklich lÃ¶schen?")) {
    localStorage.removeItem("comicKingdomSave");
    location.reload();
  }
}

function show(id) {
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function updateUI() {
  document.getElementById("statusBox").innerHTML =
    `Level: ${game.level}<br>Gold: ${game.gold}<br>Klasse: ${game.klasse}<br>
     StÃ¤rke: ${game.stats.staerke}<br>
     Geschick: ${game.stats.geschick}<br>
     Intelligenz: ${game.stats.intelligenz}<br>
     Leben: ${game.stats.leben}`;

  updateInventory();
  updateEquipment();
}

function info(name) {
  document.getElementById("cityInfo").innerText =
    name + " â€“ wird in einer spÃ¤teren Version vollstÃ¤ndig implementiert.";
}

function startQuest() {
  game.level++;
  game.gold += 20;
  dropItem();
  saveGame();
  updateUI();
  document.getElementById("questText").innerText = "Quest abgeschlossen!";
}

function runDungeon() {
  dropItem();
  saveGame();
  updateUI();
  document.getElementById("dungeonText").innerText = "Dungeon geschafft!";
}

function dropItem() {
  let allowed = Object.keys(rarityLevels).filter(r => game.level >= rarityLevels[r]);
  let rarity = allowed[Math.floor(Math.random()*allowed.length)];
  let item = {
    name: generateItemName(rarity),
    rarity,
    slot: "weapon",
    classReq: game.klasse,
    bonus: Math.floor(Math.random()*5)+1
  };
  game.inventory.push(item);
}

function generateItemName(r) {
  const names = ["Klinge","Stab","Dolch","Axt","Bogen"];
  return names[Math.floor(Math.random()*names.length)] + " ("+r+")";
}

function updateInventory() {
  const list = document.getElementById("inventoryList");
  list.innerHTML="";
  if(game.inventory.length===0) {
    list.innerText="Keine Items";
    return;
  }
  game.inventory.forEach((it,i)=>{
    let d=document.createElement("div");
    d.className="item";
    d.innerText=it.name;
    d.onclick=()=>openItem(i);
    list.appendChild(d);
  });
}

function openItem(i) {
  selectedItemIndex=i;
  let it=game.inventory[i];
  document.getElementById("itemDetails").innerHTML =
    `<b>${it.name}</b><br>Klasse: ${it.classReq}<br>Bonus: +${it.bonus}`;
  document.getElementById("modal").style.display="block";
}

function equipItem() {
  let it=game.inventory[selectedItemIndex];
  game.equipment[it.slot]=it;
  saveGame();
  updateEquipment();
  closeModal();
}

function destroyItem() {
  game.inventory.splice(selectedItemIndex,1);
  saveGame();
  updateInventory();
  closeModal();
}

function updateEquipment() {
  const box=document.getElementById("equipmentSlots");
  box.innerHTML="";
  for(let s in game.equipment){
    box.innerHTML+=`${s}: ${game.equipment[s]?game.equipment[s].name:"leer"}<br>`;
  }
}

function closeModal() {
  document.getElementById("modal").style.display="none";
}

loadGame();
</script>

</body>
</html>
