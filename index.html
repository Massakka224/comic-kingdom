<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comic Kingdom - Version 7</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 1em; }
  h1, h2 { text-align: center; }
  button { width: 100%; padding: 1em; margin: 0.5em 0; font-size: 1.1em; }
  .section { display: none; }
  .section.active { display: block; }
  .box { background: white; padding: 1em; margin: 1em 0; border-radius: 10px; }
  .item { border: 1px solid #ddd; padding: 10px; margin: 5px 0; cursor: pointer; }
  .item:hover { background: #eee; }
  .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
</style>
</head>
<body>

<h1>Comic Kingdom</h1>

<nav>
  <button onclick="show('status')">Status</button>
  <button onclick="show('quests')">Quests</button>
  <button onclick="show('dungeon')">Dungeon</button>
  <button onclick="show('stadt')">Stadt</button>
  <button onclick="show('inventar')">Inventar</button>
  <button onclick="show('ausruestung')">Ausrüstung</button>
</nav>

<!-- STATUS -->
<div id="status" class="section active">
  <h2>Status</h2>
  <div class="box">
    <p>Level: <span id="level">1</span></p>
    <p>Gold: <span id="gold">50</span></p>
    <p>Energie: <span id="energy">100</span> / <span id="maxEnergy">100</span></p>
    <p>Schokolade: <span id="schoko">1</span></p>
    <p>Bestienkristalle: <span id="kristalle">0</span></p>
    <p>Klasse: <span id="klasse">Krieger</span></p>
  </div>
</div>

<!-- QUESTS -->
<div id="quests" class="section">
  <h2>Quests</h2>
  <div class="box">
    <button onclick="acceptQuest()">Quest annehmen</button>
    <button onclick="finishQuest()">Quest abschließen</button>
    <p id="questText">Keine aktive Quest</p>
  </div>
</div>

<!-- DUNGEON -->
<div id="dungeon" class="section">
  <h2>Dungeon</h2>
  <div class="box">
    <button onclick="enterDungeon()">Dungeon betreten</button>
    <p id="dungeonText">Keine Aktion</p>
  </div>
</div>

<!-- STADT -->
<div id="stadt" class="section">
  <h2>Stadt</h2>
  <div class="box">
    <div class="grid" id="buildings"></div>
  </div>
</div>

<!-- INVENTAR -->
<div id="inventar" class="section">
  <h2>Inventar</h2>
  <div class="box" id="inventoryList">Keine Items</div>
</div>

<!-- AUSRÜSTUNG -->
<div id="ausruestung" class="section">
  <h2>Ausrüstung</h2>
  <div class="box">
    <p><b>Slots:</b></p>
    <div id="slots"></div>
  </div>
</div>

<!-- MODAL -->
<div id="modal" style="display:none;">
  <div class="box">
    <h2>Item Details</h2>
    <div id="itemDetails"></div>
    <button onclick="equipItem()">Ausrüsten</button>
    <button onclick="unequipItem()">Ablegen</button>
    <button onclick="upgradeItem()">Verbessern</button>
    <button onclick="destroyItem()">Zerstören</button>
    <button onclick="closeModal()">Schließen</button>
  </div>
</div>

<script>
/* ======= GLOBAL ======= */
let level = 1;
let gold = 50;
let schoko = 1;
let kristalle = 0;
let questActive = false;
let maxEnergy = 100;
let energy = maxEnergy;
let klasse = "Krieger";

let inventory = [];
let equipped = { weapon: null, armor: null, helmet: null, boots: null, ring: null };

/* ======= BUILDINGS ======= */
let buildings = [
  { id: "steinbruch", name: "Steinbruch", lvl: 0, desc: "Erhöht Ressourcen, liefert Materialien." },
  { id: "festung", name: "Festung", lvl: 0, desc: "Erhöht Verteidigung & Stadtbonus." },
  { id: "taverne", name: "Taverne", lvl: 0, desc: "Hier bekommst du Buffs & Quests." },
  { id: "schmiede", name: "Schmiede", lvl: 0, desc: "Erlaubt Item-Upgrades & Crafting." },
  { id: "bibliothek", name: "Bibliothek", lvl: 0, desc: "Erhöht Skills & Wissen." },
  { id: "markt", name: "Markt", lvl: 0, desc: "Hier kannst du Items handeln." }
];

/* ======= ITEMS ======= */
function createItem(rarity) {
  const names = {
    common: ["Eisenhelm", "Lederstiefel", "Holzschwert", "Eisenrüstung"],
    uncommon: ["Silberhelm", "Stahlstiefel", "Stahlschwert", "Drachenleder"],
    rare: ["Dämmerungsschwert", "Feuerhandschuhe", "Blitzring", "Eisrüstung"],
    epic: ["Sternenstab", "Königsrüstung", "Drachenkrone", "Götterschwert"],
    legendary: ["Axt des Zorns", "Himmelsschuppe", "Seelenklinge", "Chaosring"],
    mystical: ["Runenstab des Windes", "Schattenrüstung", "Mondklinge", "Lichthelm"],
    heavenly: ["Himmlische Axt", "Göttliche Rüstung", "Sternenkrone", "Himmelsstiefel"]
  };
  const levels = { common: 1, uncommon: 20, rare: 30, epic: 100, legendary: 150, mystical: 500, heavenly: 700 };
  const bonus = { common: 1, uncommon: 2, rare: 4, epic: 6, legendary: 9, mystical: 12, heavenly: 16 };

  const nameList = names[rarity];
  const name = nameList[Math.floor(Math.random() * nameList.length)];
  return {
    id: "item_" + Date.now() + "_" + Math.floor(Math.random()*1000),
    name: name,
    rarity: rarity,
    requiredLevel: levels[rarity],
    power: bonus[rarity] + Math.floor(Math.random()*5),
    type: ["weapon","armor","helmet","boots","ring"][Math.floor(Math.random()*5)],
    classOnly: klasse
  };
}

/* ======= UI ======= */
function show(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(id === "stadt") renderBuildings();
  if(id === "inventar") renderInventory
