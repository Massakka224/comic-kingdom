<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comic Kingdom</title>
<style>
body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 1em; }
h1, h2 { text-align: center; }
button { width: 100%; padding: 1em; margin: 0.5em 0; font-size: 1.1em; }
.section { display: none; }
.section.active { display: block; }
.box { background: white; padding: 1em; }
</style>
</head>
<body>

<h1>Comic Kingdom</h1>

<nav>
  <button onclick="show('status')">Status</button>
  <button onclick="show('taverne')">Taverne</button>
  <button onclick="show('quests')">Quests</button>
  <button onclick="show('stadt')">Stadt</button>
</nav>

<div id="status" class="section active">
  <h2>Status</h2>
  <div class="box">
    <p>Level: <span id="level">1</span></p>
    <p>Gold: <span id="gold">50</span></p>
    <p>Schokolade: <span id="schoko">1</span></p>
    <p>Rüstung: Gewöhnlich</p>
    <p>Klasse: Krieger</p>
    <p>Schlüssel - Erde: <span id="keysEarth">0</span></p>
    <p>Schlüssel - Wasser: <span id="keysWater">0</span></p>
    <p>Schlüssel - Feuer: <span id="keysFire">0</span></p>
    <p>Schlüssel - Wind: <span id="keysAir">0</span></p>
  </div>
</div>

<div id="taverne" class="section">
  <h2>Taverne</h2>
  <button onclick="acceptQuest()">Quest annehmen</button>
  <button onclick="eat()">Essen kaufen (Buff)</button>
</div>

<div id="quests" class="section">
  <h2>Quest</h2>
  <p id="questText">Keine aktive Quest</p>
  <button onclick="finishQuest()">Quest abschließen</button>
</div>

<div id="stadt" class="section">
  <h2>Stadt</h2>
  <p>Baue Gebäude, sammle Ressourcen und verbessere deine Ausrüstung.</p>
  <button onclick="cityGuard()">Stadtwache (Gold)</button>

  <h3>Dungeons</h3>
  <button onclick="enterDungeon(0)">Stein-Dungeon</button>
  <button onclick="enterDungeon(1)">Wasser-Dungeon</button>
  <button onclick="enterDungeon(2)">Feuer-Dungeon</button>
  <button onclick="enterDungeon(3)">Wind-Dungeon</button>
</div>

<script>
let player = {
  level: 1,
  gold: 50,
  schoko: 1,
  keys: { earth: 0, water: 0, fire: 0, air: 0 },
  attack: 5,
  defense: 3,
  hp: 20
};

let questActive = false;
let currentQuest = null;

const dungeons = [
  { name: "Stein-Dungeon", keyType: "earth" },
  { name: "Wasser-Dungeon", keyType: "water" },
  { name: "Feuer-Dungeon", keyType: "fire" },
  { name: "Wind-Dungeon", keyType: "air" }
];

const quests = [
  { text: "Besiege 5 Kobolde", keyReward: { type: "earth", amount: 1 } },
  { text: "Besiege 3 Wasserspinnen", keyReward: { type: "water", amount: 1 } },
  { text: "Besiege 1 Feuerdrache", keyReward: { type: "fire", amount: 1 } },
  { text: "Besiege 2 Windgeister", keyReward: { type: "air", amount: 1 } }
];

const monsters = [
  { name: "Kobold", hp: 8, attack: 3, defense: 1, gold: 10, keyType: "earth", keyChance: 0.02 },
  { name: "Wasserspinne", hp: 10, attack: 4, defense: 1, gold: 12, keyType: "water", keyChance: 0.015 },
  { name: "Feuerdrache", hp: 20, attack: 6, defense: 2, gold: 25, keyType: "fire", keyChance: 0.01 },
  { name: "Windgeist", hp: 12, attack: 5, defense: 2, gold: 18, keyType: "air", keyChance: 0.01 }
];

const bosses = [
  { name: "Stein Golem", hp: 60, attack: 12, defense: 5, gold: 100, keyType: "earth" },
  { name: "Wasser Leviathan", hp: 70, attack: 13, defense: 6, gold: 120, keyType: "water" }
];

function show(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function updateUI() {
  document.getElementById("level").innerText = player.level;
  document.getElementById("gold").innerText = player.gold;
  document.getElementById("schoko").innerText = player.schoko;
  document.getElementById("keysEarth").innerText = player.keys.earth;
  document.getElementById("keysWater").innerText = player.keys.water;
  document.getElementById("keysFire").innerText = player.keys.fire;
  document.getElementById("keysAir").innerText = player.keys.air;

  localStorage.setItem("comicKingdomPlayer", JSON.stringify(player));
}

function loadGame() {
  const saved = localStorage.getItem("comicKingdomPlayer");
  if (saved) {
    player = JSON.parse(saved);
  }
  updateUI();
}

function acceptQuest() {
  if (questActive) {
    alert("Du hast bereits eine Quest.");
    return;
  }
  questActive = true;
  currentQuest = quests[Math.floor(Math.random() * quests.length)];
  document.getElementById("questText").innerText = "Quest: " + currentQuest.text;
  show('quests');
}

function finishQuest() {
  if (!questActive) {
    alert("Keine aktive Quest.");
    return;
  }
  questActive = false;

  const reward = currentQuest.keyReward;
  player.keys[reward.type] += reward.amount;

  player.level++;
  player.gold += 20;

  document.getElementById("questText").innerText = "Quest abgeschlossen!";
  updateUI();
}

function eat() {
  if (player.gold < 10) {
    alert("Nicht genug Gold.");
    return;
  }
  player.gold -= 10;
  updateUI();
  alert("Buff aktiv!");
}

function cityGuard() {
  player.gold += 5;
  updateUI();
}

function enterDungeon(dungeonIndex) {
  const dungeon = dungeons[dungeonIndex];
  const keyType = dungeon.keyType;

  if (player.keys[keyType] <= 0) {
    alert("Du brauchst einen " + keyType + " Schlüssel, um diesen Dungeon zu betreten.");
    return;
  }

  player.keys[keyType]--;
  alert("Dungeon betreten: " + dungeon.name + " (Schlüssel wurde verbraucht)");
  updateUI();

  // Kampf gegen Monster
  startBattle();
}

function startBattle() {
  const monster = monsters[Math.floor(Math.random() * monsters.length)];
  const isBoss = Math.random() < 0.1; // 10% Bosschance
  const enemy = isBoss ? bosses[Math.floor(Math.random() * bosses.length)] : monster;

  const result = fight(player, enemy);

  if (result.win) {
    player.level++;
    player.gold += enemy.gold;

    // Schlüssel drop chance
    if (!isBoss && Math.random() < enemy.keyChance) {
      player.keys[enemy.keyType]++;
      alert("Du hast einen Schlüssel bekommen: " + enemy.keyType);
    }

    // Boss special sound
    if (isBoss) {
      alert("Boss besiegt! (Sound: final-level-bonus)");
    } else {
      alert("Monster besiegt!");
    }

  } else {
    alert("Du hast verloren!");
  }

  updateUI();
}

function fight(player, enemy) {
  let playerHp = player.hp;
  let enemyHp = enemy.hp;

  while (playerHp > 0 && enemyHp > 0) {
    enemyHp -= Math.max(0, player.attack - enemy.defense);
    if (enemyHp <= 0) return { win: true };

    playerHp -= Math.max(0, enemy.attack - player.defense);
  }

  return { win: false };
}

loadGame();
</script>

</body>
</html><!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comic Kingdom</title>
<style>
body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 1em; }
h1, h2 { text-align: center; }
button { width: 100%; padding: 1em; margin: 0.5em 0; font-size: 1.1em; }
.section { display: none; }
.section.active { display: block; }
.box { background: white; padding: 1em; }
</style>
</head>
<body>

<h1>Comic Kingdom</h1>

<nav>
  <button onclick="show('status')">Status</button>
  <button onclick="show('taverne')">Taverne</button>
  <button onclick="show('quests')">Quests</button>
  <button onclick="show('stadt')">Stadt</button>
</nav>

<div id="status" class="section active">
  <h2>Status</h2>
  <div class="box">
    <p>Level: <span id="level">1</span></p>
    <p>Gold: <span id="gold">50</span></p>
    <p>Schokolade: <span id="schoko">1</span></p>
    <p>Rüstung: Gewöhnlich</p>
    <p>Klasse: Krieger</p>
    <p>Schlüssel - Erde: <span id="keysEarth">0</span></p>
    <p>Schlüssel - Wasser: <span id="keysWater">0</span></p>
    <p>Schlüssel - Feuer: <span id="keysFire">0</span></p>
    <p>Schlüssel - Wind: <span id="keysAir">0</span></p>
  </div>
</div>

<div id="taverne" class="section">
  <h2>Taverne</h2>
  <button onclick="acceptQuest()">Quest annehmen</button>
  <button onclick="eat()">Essen kaufen (Buff)</button>
</div>

<div id="quests" class="section">
  <h2>Quest</h2>
  <p id="questText">Keine aktive Quest</p>
  <button onclick="finishQuest()">Quest abschließen</button>
</div>

<div id="stadt" class="section">
  <h2>Stadt</h2>
  <p>Baue Gebäude, sammle Ressourcen und verbessere deine Ausrüstung.</p>
  <button onclick="cityGuard()">Stadtwache (Gold)</button>

  <h3>Dungeons</h3>
  <button onclick="enterDungeon(0)">Stein-Dungeon</button>
  <button onclick="enterDungeon(1)">Wasser-Dungeon</button>
  <button onclick="enterDungeon(2)">Feuer-Dungeon</button>
  <button onclick="enterDungeon(3)">Wind-Dungeon</button>
</div>

<script>
let player = {
  level: 1,
  gold: 50,
  schoko: 1,
  keys: { earth: 0, water: 0, fire: 0, air: 0 },
  attack: 5,
  defense: 3,
  hp: 20
};

let questActive = false;
let currentQuest = null;

const dungeons = [
  { name: "Stein-Dungeon", keyType: "earth" },
  { name: "Wasser-Dungeon", keyType: "water" },
  { name: "Feuer-Dungeon", keyType: "fire" },
  { name: "Wind-Dungeon", keyType: "air" }
];

const quests = [
  { text: "Besiege 5 Kobolde", keyReward: { type: "earth", amount: 1 } },
  { text: "Besiege 3 Wasserspinnen", keyReward: { type: "water", amount: 1 } },
  { text: "Besiege 1 Feuerdrache", keyReward: { type: "fire", amount: 1 } },
  { text: "Besiege 2 Windgeister", keyReward: { type: "air", amount: 1 } }
];

const monsters = [
  { name: "Kobold", hp: 8, attack: 3, defense: 1, gold: 10, keyType: "earth", keyChance: 0.02 },
  { name: "Wasserspinne", hp: 10, attack: 4, defense: 1, gold: 12, keyType: "water", keyChance: 0.015 },
  { name: "Feuerdrache", hp: 20, attack: 6, defense: 2, gold: 25, keyType: "fire", keyChance: 0.01 },
  { name: "Windgeist", hp: 12, attack: 5, defense: 2, gold: 18, keyType: "air", keyChance: 0.01 }
];

const bosses = [
  { name: "Stein Golem", hp: 60, attack: 12, defense: 5, gold: 100, keyType: "earth" },
  { name: "Wasser Leviathan", hp: 70, attack: 13, defense: 6, gold: 120, keyType: "water" }
];

function show(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function updateUI() {
  document.getElementById("level").innerText = player.level;
  document.getElementById("gold").innerText = player.gold;
  document.getElementById("schoko").innerText = player.schoko;
  document.getElementById("keysEarth").innerText = player.keys.earth;
  document.getElementById("keysWater").innerText = player.keys.water;
  document.getElementById("keysFire").innerText = player.keys.fire;
  document.getElementById("keysAir").innerText = player.keys.air;

  localStorage.setItem("comicKingdomPlayer", JSON.stringify(player));
}

function loadGame() {
  const saved = localStorage.getItem("comicKingdomPlayer");
  if (saved) {
    player = JSON.parse(saved);
  }
  updateUI();
}

function acceptQuest() {
  if (questActive) {
    alert("Du hast bereits eine Quest.");
    return;
  }
  questActive = true;
  currentQuest = quests[Math.floor(Math.random() * quests.length)];
  document.getElementById("questText").innerText = "Quest: " + currentQuest.text;
  show('quests');
}

function finishQuest() {
  if (!questActive) {
    alert("Keine aktive Quest.");
    return;
  }
  questActive = false;

  const reward = currentQuest.keyReward;
  player.keys[reward.type] += reward.amount;

  player.level++;
  player.gold += 20;

  document.getElementById("questText").innerText = "Quest abgeschlossen!";
  updateUI();
}

function eat() {
  if (player.gold < 10) {
    alert("Nicht genug Gold.");
    return;
  }
  player.gold -= 10;
  updateUI();
  alert("Buff aktiv!");
}

function cityGuard() {
  player.gold += 5;
  updateUI();
}

function enterDungeon(dungeonIndex) {
  const dungeon = dungeons[dungeonIndex];
  const keyType = dungeon.keyType;

  if (player.keys[keyType] <= 0) {
    alert("Du brauchst einen " + keyType + " Schlüssel, um diesen Dungeon zu betreten.");
    return;
  }

  player.keys[keyType]--;
  alert("Dungeon betreten: " + dungeon.name + " (Schlüssel wurde verbraucht)");
  updateUI();

  // Kampf gegen Monster
  startBattle();
}

function startBattle() {
  const monster = monsters[Math.floor(Math.random() * monsters.length)];
  const isBoss = Math.random() < 0.1; // 10% Bosschance
  const enemy = isBoss ? bosses[Math.floor(Math.random() * bosses.length)] : monster;

  const result = fight(player, enemy);

  if (result.win) {
    player.level++;
    player.gold += enemy.gold;

    // Schlüssel drop chance
    if (!isBoss && Math.random() < enemy.keyChance) {
      player.keys[enemy.keyType]++;
      alert("Du hast einen Schlüssel bekommen: " + enemy.keyType);
    }

    // Boss special sound
    if (isBoss) {
      alert("Boss besiegt! (Sound: final-level-bonus)");
    } else {
      alert("Monster besiegt!");
    }

  } else {
    alert("Du hast verloren!");
  }

  updateUI();
}

function fight(player, enemy) {
  let playerHp = player.hp;
  let enemyHp = enemy.hp;

  while (playerHp > 0 && enemyHp > 0) {
    enemyHp -= Math.max(0, player.attack - enemy.defense);
    if (enemyHp <= 0) return { win: true };

    playerHp -= Math.max(0, enemy.attack - player.defense);
  }

  return { win: false };
}

loadGame();
</script>

</body>
</html>
